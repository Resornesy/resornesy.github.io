(async()=>{const e=document.getElementById("projectList");if(!e)return;let t=[];try{const e=await fetch("https://raw.githubusercontent.com/Resornesy/blog-api/main/projects-lock.json");if(!e.ok)throw new Error("无法连接: "+e.status);const n=await e.json();if(!0!==n["project-status"]||!n.projects)throw new Error("empty");t=Object.entries(n.projects)}catch(t){return void(e.innerHTML='<div style="text-align:center;color:#ef4444;padding:2rem;">加载失败</div>')}const n=document.createDocumentFragment();for(const[e,o]of t){const t=document.createElement("div");t.className="project-card";const c=document.createElement("img");c.className="icon",c.src=o.icon||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjZGRkIi8+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSIgZmlsbD0iIzk5OSIgZm9udC1zaXplPSIxMiI+5Zu+54mHPC90ZXh0Pgo8L3N2Zz4=",c.alt=e;const a=document.createElement("div");a.className="proj-info";const s=document.createElement("h3");s.textContent=e;const l=document.createElement("p");l.textContent=o.describe||"暂无描述";const r=document.createElement("ul");r.style.margin="6px 0 0 0",r.style.padding="0",r.style.listStyle="none",r.style.fontSize=".75rem",r.style.color="var(--sub-color, #555)";const i=(e,t)=>{if(null==t||""===t)return;const n=document.createElement("li");n.innerHTML=`<strong>${e}:</strong> ${Array.isArray(t)?t.join(" / "):t}`,r.appendChild(n)};i("作者",o.author),i("日期",o.date),i("协议",o.license),i("语言",o.language),a.append(s,l,r);const d=document.createElement("div");if(d.className="proj-actions",o.url){const e=document.createElement("button");e.className="projects",e.innerHTML="<span>项目详情</span>",e.onclick=()=>window.open(o.url,"_blank"),d.appendChild(e)}if(o.download){const e=document.createElement("button");e.className="projects",e.innerHTML="<span>下载</span>",e.onclick=()=>window.open(o.download,"_blank"),d.appendChild(e)}if(!o.url&&!o.download){const e=document.createElement("span");e.style.color="#888",e.textContent="暂无",d.appendChild(e)}t.append(c,a,d),n.appendChild(t)}e.appendChild(n)})();